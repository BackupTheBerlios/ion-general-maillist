<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> statusd_mpd-socket.lua
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/ion-general/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:ion-general%40lists.berlios.de?Subject=Re%3A%20statusd_mpd-socket.lua&In-Reply-To=%3Cslrngi7gv6.9g0.tuomov%40jolt.modeemi.cs.tut.fi%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001492.html">
   <LINK REL="Next"  HREF="001494.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>statusd_mpd-socket.lua</H1>
    <B>Tuomo Valkonen</B> 
    <A HREF="mailto:ion-general%40lists.berlios.de?Subject=Re%3A%20statusd_mpd-socket.lua&In-Reply-To=%3Cslrngi7gv6.9g0.tuomov%40jolt.modeemi.cs.tut.fi%3E"
       TITLE="statusd_mpd-socket.lua">tuomov at iki.fi
       </A><BR>
    <I>Wed Nov 19 08:44:38 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="001492.html">statusd_mpd-socket.lua
</A></li>
        <LI>Next message: <A HREF="001494.html">statusd_mpd-socket.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1493">[ date ]</a>
              <a href="thread.html#1493">[ thread ]</a>
              <a href="subject.html#1493">[ subject ]</a>
              <a href="author.html#1493">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 2008-11-19, Marc Hartstein &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/ion-general">marc.hartstein at alum.vassar.edu</A>&gt; wrote:
&gt;<i> A drop-in replacement for statusd_mpd.lua which uses sockets instead of
</I>&gt;<i> popen to communicate with mpd.  Suggest renaming to replace the other
</I>&gt;<i> script.
</I>
I suggest sending it to the scripts repository for easy availability.

Also, on a cursory glance, it appeared to be a timer hack. If it's
at all possible to get the file descriptor from Lua, I suggest
adding it to those selected on for event-based processing. This
will require a little bit of C code to add the desciptor, since 
popen_bgread is currently the only interface and unlikely to work
correctly on sockets. While to ion3plus, certainly new interfaces
could be added to support selecting on arbitrary fds from the Lua
side (and the primary reason the support isn't there, is that fds
are not well available from Lua), this can be done with e.g. the
TCC/alien/c/invoke hacks disgussed e.g. at

  <A HREF="http://www.mail-archive.com/ion-general@lists.berlios.de/msg02559.html">http://www.mail-archive.com/ion-general@lists.berlios.de/msg02559.html</A>

-- 
In 1995, Linux was almost a bicycle; an alternative way of live to the
Windows petrol beasts that had to be taken to the dealer for service.
In 2008, Linux has bloated into a gas-guzzler, and cycle paths have 
been replaced with polluted motorways.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001492.html">statusd_mpd-socket.lua
</A></li>
	<LI>Next message: <A HREF="001494.html">statusd_mpd-socket.lua
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1493">[ date ]</a>
              <a href="thread.html#1493">[ thread ]</a>
              <a href="subject.html#1493">[ subject ]</a>
              <a href="author.html#1493">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/ion-general">More information about the Ion-general
mailing list</a><br>
</body></html>
